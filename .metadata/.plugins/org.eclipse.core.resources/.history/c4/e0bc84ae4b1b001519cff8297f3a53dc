import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import com.google.common.io.Files;
import com.google.common.io.PatternFilenameFilter;

public class Main {
	public static void main(String[] args) {
		String inputDirectoryName = ".";
		if (args.length > 0)
			inputDirectoryName = args[0];

		String outputFileName = args[1];
		File inputDirectory = new File(inputDirectoryName);
		PatternFilenameFilter dfmFileFilter = new PatternFilenameFilter(
				".*\\.dfm");
		File[] inputFiles = inputDirectory.listFiles(dfmFileFilter);
		if (inputFiles == null) {
			System.out.println("Could not find input *.pos files in "
					+ inputDirectoryName);
			return;
		}
		System.out.println("Found " + inputFiles.length + " input files");
		File outputFile = new File(outputFileName);
		Files.createParentDirs(outputFile);
		FileOutputStream output = Files.newOutputStreamSupplier(outputFile)
				.getOutput();
		System.out.println("Appending to " + outputFileName);
		for (File input : inputFiles) {
			Files.copy(input, output);
			System.out.println("Appended " + input.getName());
		}
	}

	/*
	 * (non-Java-doc)
	 * 
	 * @see java.lang.Object#Object()
	 */
	public Main() {
		super();
	}

}